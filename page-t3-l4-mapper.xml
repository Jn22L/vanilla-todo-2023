<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="paget3l4">  

<!-- HjBoard 조회 -->
<select id="selectHjBoard">
  SELECT A.SEQ, A.TITLE, A.CONTENT, A.USER_ID, B.USER_NAME,
         CONCAT(  DATE_FORMAT(A.CREATE_DT,'%y-%m-%d')
                , CASE DAYOFWEEK(A.CREATE_DT) 
 			              WHEN '1' THEN '(일)'
           			    WHEN '2' THEN '(월)'
 			              WHEN '3' THEN '(화)'
			              WHEN '4' THEN '(수)'
			              WHEN '5' THEN '(목)'
			              WHEN '6' THEN '(금)'
			              WHEN '7' THEN '(토)'
 			            END
                , DATE_FORMAT(A.CREATE_DT,' %H:%i')
          ) AS CREATE_DT,
		 A.COMPLETE_DATE
    FROM HJ_BOARD A, HJ_USER B
   WHERE 1=1   
     AND BOARD_ID = 'T3L4'
     AND A.USER_ID = B.USER_ID
    <if test='SEQ != null and SEQ != ""'>
      AND A.SEQ = #{SEQ}
    </if>   
    <if test='COMPLETE_YN == "Y"'>
      AND COMPLETE_DATE < DATE_FORMAT(NOW() - INTERVAL 2 DAY,'%Y%m%d')
    </if>   
    <if test='COMPLETE_YN == "N"'>
      AND COMPLETE_DATE >= DATE_FORMAT(NOW() - INTERVAL 2 DAY,'%Y%m%d')
    </if>                
   ORDER BY SEQ DESC
</select>

</mapper>
 